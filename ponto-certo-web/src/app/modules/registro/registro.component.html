<app-header></app-header>
<app-sidebar></app-sidebar>

<!-- Registro card -->
<div class="main d-flex flex-row flex-nowrap gap-5 justify-content-center">
  <div class="card w-50">
    <h2 class="registro-titulo mb-4">Registro de Ponto</h2>
    <div class="relogio">
      <div class="hour">
        <p>{{ dateTime | date : "HH" }}</p>
      </div>
      <p class="separator">:</p>
      <div class="minute">
        <p>{{ dateTime | date : "mm" }}</p>
      </div>
      <p class="separator">:</p>
      <div class="second">
        <p>{{ dateTime | date : "ss" }}</p>
      </div>
    </div>
    <div class="calendario">
      <p>{{ dateTime | date : "dd/MM/yyyy" }}</p>
    </div>
    <div id="map"></div>
    <button 
      (click)="registrarPonto()" 
      class="registro-botao"
      [disabled]="registrando">
      {{ registrando ? 'Registrando...' : 'Registrar Ponto' }}
    </button>
  </div>

  <!-- Histórico -->
  <div class="historico-container w-25 p-4">
    <div class="d-flex flex-column align-items-center">
      <p class="texto-historico fs-3">Últimos registros</p>
      <div class="registros d-flex flex-column gap-2 w-100">
        <!-- Histórico dinâmico gerado com base nos registros -->
        <div 
          *ngFor="let reg of registros" 
          class="registro border-bottom py-2 px-3 rounded bg-dark text-light">
          <p class="texto-hora fs-5 mb-1">{{ reg.dataHora | date : 'HH:mm' }}</p>
          <p class="texto-data fs-6 mb-1">{{ reg.dataHora | date : 'dd/MM/yyyy' }}</p>
          <p class="texto-tipo fs-6 mb-0">
            {{ reg.tipo === 0 ? 'Entrada' : reg.tipo === 1 ? 'Saída' : 'Outro' }}
          </p>
        </div>
      </div>
      <hr />
      <div class="d-flex flex-column align-items-center">
        <a href="">
          <p class="fs-4 text-light">Ver mais</p>
        </a>
        <a href="">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            fill="currentColor"
            class="bi bi-plus text-light"
            viewBox="0 0 16 16"
          >
            <path
              d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"
            />
          </svg>
        </a>
      </div>
    </div>
  </div>
</div>
